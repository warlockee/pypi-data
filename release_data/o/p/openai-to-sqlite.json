{
    "0.1a0": {
        "info": {
            "author": "Simon Willison",
            "author_email": "",
            "bugtrack_url": null,
            "classifiers": [],
            "description": "# openai-to-sqlite\n\n[![PyPI](https://img.shields.io/pypi/v/openai-to-sqlite.svg)](https://pypi.org/project/openai-to-sqlite/)\n[![Changelog](https://img.shields.io/github/v/release/simonw/openai-to-sqlite?include_prereleases&label=changelog)](https://github.com/simonw/openai-to-sqlite/releases)\n[![Tests](https://github.com/simonw/openai-to-sqlite/workflows/Test/badge.svg)](https://github.com/simonw/openai-to-sqlite/actions?query=workflow%3ATest)\n[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](https://github.com/simonw/openai-to-sqlite/blob/master/LICENSE)\n\nSave OpenAI API results to a SQLite database\n\n**This tool is under active development**. It is not yet ready for production use.\n\n## Installation\n\nInstall this tool using `pip`:\n\n    pip install openai-to-sqlite\n\n## Usage\n\nFor help, run:\n\n    openai-to-sqlite --help\n\nYou can also use:\n\n    python -m openai_to_sqlite --help\n\n### Configuration\n\nYou will need an OpenAI API key to use this tool.\n\nYou can create one at https://beta.openai.com/account/api-keys\n\nYou can then either set the API key as an environment variable:\n\n    export OPENAI_API_KEY=sk-...\n\nOr pass it to each command using the `--token sk-...` option.\n\n### Embeddings\n\nThe first command supported by this tool is `embeddings`:\n\n    openai-to-sqlite embeddings --help\n\nThis command can be fed a CSV (or JSON or TSV) file full of content, and it will use the \nOpenAI API to generate embeddings for each row.\n\nThe first column of the CSV file will be treated as the content ID. Any other columns will be concatenated together and used as the text to be embedded.\n\nThese embeddings will then be saved as binary blobs in the `embeddings` table of a \nSQLite database.\n\nGiven a CSV file like this:\n\n    id,content\n    1,This is a test\n    2,This is another test\n\nEmbeddings can be stored like so:\n\n    openai-to-sqlite embeddings embeddings.db data.csv --csv\n\nThe `--csv` flag tells the tool that the input file is a CSV file. Without this it\nwill attempt to guess.\n\nThe resulting schema looks like this:\n\n```sql\nCREATE TABLE [embeddings] (\n   [id] TEXT PRIMARY KEY,\n   [embedding] BLOB\n);\n```\nThe binary data can be extracted into a Python array of floating point numbers like this:\n```python\nimport struct\n\nvector = struct.unpack(\n    \"f\" * 1536, binary_embedding\n)\n```\n### Search\n\nHaving saved the embeddings for content, you can run searches using the `search` command:\n\n    openai-to-sqlite search embeddings.db 'this is my search term'\n\nThe output will be a list of cosine similarity scores and content IDs:\n```\n% openai-to-sqlite search blog.db 'cool datasette demo'\n0.843 7849\n0.830 8036\n0.828 8195\n0.826 8098\n0.818 8086\n0.817 8171\n0.816 8121\n0.815 7860\n0.815 7872\n0.814 8169\n```\n## Development\n\nTo contribute to this tool, first checkout the code. Then create a new virtual environment:\n\n    cd openai-to-sqlite\n    python -m venv venv\n    source venv/bin/activate\n\nNow install the dependencies and test dependencies:\n\n    pip install -e '.[test]'\n\nTo run the tests:\n\n    pytest\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/simonw/openai-to-sqlite",
            "keywords": "",
            "license": "Apache License, Version 2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "openai-to-sqlite",
            "package_url": "https://pypi.org/project/openai-to-sqlite/",
            "platform": null,
            "project_url": "https://pypi.org/project/openai-to-sqlite/",
            "project_urls": {
                "CI": "https://github.com/simonw/openai-to-sqlite/actions",
                "Changelog": "https://github.com/simonw/openai-to-sqlite/releases",
                "Homepage": "https://github.com/simonw/openai-to-sqlite",
                "Issues": "https://github.com/simonw/openai-to-sqlite/issues"
            },
            "release_url": "https://pypi.org/project/openai-to-sqlite/0.1a0/",
            "requires_dist": [
                "click",
                "httpx",
                "sqlite-utils (>=3.28)",
                "pytest ; extra == 'test'"
            ],
            "requires_python": ">=3.7",
            "summary": "Save OpenAI API results to a SQLite database",
            "version": "0.1a0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16283894,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "blake2b_256": "979485262c3d7894d810267fe64d2948f5f8372cecfc401593e54ce853c69fd0",
                    "md5": "cc64bb7eb7f66f67ab5f52ec4d1d3320",
                    "sha256": "620998af7fcfb189a4f0d431988ebc0a30e89295d8cc2509be35361a2f1d4deb"
                },
                "downloads": -1,
                "filename": "openai_to_sqlite-0.1a0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "cc64bb7eb7f66f67ab5f52ec4d1d3320",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.7",
                "size": 9273,
                "upload_time": "2023-01-03T01:25:46",
                "upload_time_iso_8601": "2023-01-03T01:25:46.029607Z",
                "url": "https://files.pythonhosted.org/packages/97/94/85262c3d7894d810267fe64d2948f5f8372cecfc401593e54ce853c69fd0/openai_to_sqlite-0.1a0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "blake2b_256": "30e4e1f9b7c4a78b47b8253c6eac3ff2da1cc10241658d8139748d837d3b3f5f",
                    "md5": "ef747061c4656575f97d505866935397",
                    "sha256": "2b057d013f8e676a3a1eeafb197fd4839f62052db20e09dda29c3f6fe64b29f9"
                },
                "downloads": -1,
                "filename": "openai-to-sqlite-0.1a0.tar.gz",
                "has_sig": false,
                "md5_digest": "ef747061c4656575f97d505866935397",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.7",
                "size": 8399,
                "upload_time": "2023-01-03T01:25:47",
                "upload_time_iso_8601": "2023-01-03T01:25:47.781374Z",
                "url": "https://files.pythonhosted.org/packages/30/e4/e1f9b7c4a78b47b8253c6eac3ff2da1cc10241658d8139748d837d3b3f5f/openai-to-sqlite-0.1a0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}