{
    "0.1.5": {
        "info": {
            "author": "Florian Fu\u00df",
            "author_email": "",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 4 - Beta",
                "Intended Audience :: Developers",
                "License :: OSI Approved",
                "Operating System :: OS Independent",
                "Programming Language :: JavaScript",
                "Programming Language :: Python :: 3 :: Only",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9",
                "Typing :: Typed"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/pharindoko/cdk-internal-gateway.git",
            "keywords": "",
            "license": "Apache-2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "pharindoko.cdk-internal-gateway",
            "package_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/",
            "platform": null,
            "project_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/",
            "project_urls": {
                "Homepage": "https://github.com/pharindoko/cdk-internal-gateway.git",
                "Source": "https://github.com/pharindoko/cdk-internal-gateway.git"
            },
            "release_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/0.1.5/",
            "requires_dist": [
                "aws-cdk-lib (<3.0.0,>=2.46.0)",
                "constructs (<11.0.0,>=10.0.5)",
                "jsii (<2.0.0,>=1.70.0)",
                "publication (>=0.0.3)",
                "typeguard (~=2.13.3)"
            ],
            "requires_python": "~=3.7",
            "summary": "CDK construct to create to create internal serverless applications.",
            "version": "0.1.5",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15701148,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "b5c9c02fd65e1c457d25a40b3992b5b9",
                    "sha256": "c957dea3dd8f89b9e92a3908b74199f00a9adda51aee0d38ad8ef4f0bb4d84c8"
                },
                "downloads": -1,
                "filename": "pharindoko.cdk_internal_gateway-0.1.5-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "b5c9c02fd65e1c457d25a40b3992b5b9",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": "~=3.7",
                "size": 166027,
                "upload_time": "2022-11-06T06:37:22",
                "upload_time_iso_8601": "2022-11-06T06:37:22.736455Z",
                "url": "https://files.pythonhosted.org/packages/9f/3a/a1cef396f2cd97192ebf98f73cc114b486b3442d2215ff1f9f56b1a8c069/pharindoko.cdk_internal_gateway-0.1.5-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "ebb49d5df919d4d13bb65bb105aa1ce1",
                    "sha256": "94488a808f15826bf7afb58e1c4204ffcc0db7cc441225f202aed60bffd53cb7"
                },
                "downloads": -1,
                "filename": "pharindoko.cdk-internal-gateway-0.1.5.tar.gz",
                "has_sig": false,
                "md5_digest": "ebb49d5df919d4d13bb65bb105aa1ce1",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": "~=3.7",
                "size": 167852,
                "upload_time": "2022-11-06T06:37:24",
                "upload_time_iso_8601": "2022-11-06T06:37:24.141272Z",
                "url": "https://files.pythonhosted.org/packages/89/d0/3bf10660bf18e980389333401c411e5a7cd3654bc0638a01e4bed01a8052/pharindoko.cdk-internal-gateway-0.1.5.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.1.6": {
        "info": {
            "author": "Florian Fu\u00df",
            "author_email": "",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 4 - Beta",
                "Intended Audience :: Developers",
                "License :: OSI Approved",
                "Operating System :: OS Independent",
                "Programming Language :: JavaScript",
                "Programming Language :: Python :: 3 :: Only",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9",
                "Typing :: Typed"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/pharindoko/cdk-internal-gateway.git",
            "keywords": "",
            "license": "Apache-2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "pharindoko.cdk-internal-gateway",
            "package_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/",
            "platform": null,
            "project_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/",
            "project_urls": {
                "Homepage": "https://github.com/pharindoko/cdk-internal-gateway.git",
                "Source": "https://github.com/pharindoko/cdk-internal-gateway.git"
            },
            "release_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/0.1.6/",
            "requires_dist": [
                "aws-cdk-lib (<3.0.0,>=2.46.0)",
                "constructs (<11.0.0,>=10.0.5)",
                "jsii (<2.0.0,>=1.70.0)",
                "publication (>=0.0.3)",
                "typeguard (~=2.13.3)"
            ],
            "requires_python": "~=3.7",
            "summary": "CDK construct to create to create internal serverless applications.",
            "version": "0.1.6",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15701148,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "2a285ca8731677b0c62f997efa7632fd",
                    "sha256": "44a1a67dfba14160bf833927f08bb50d0ffa89d6014e2b7481c3c85e25ed6c93"
                },
                "downloads": -1,
                "filename": "pharindoko.cdk_internal_gateway-0.1.6-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "2a285ca8731677b0c62f997efa7632fd",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": "~=3.7",
                "size": 166125,
                "upload_time": "2022-11-06T09:48:22",
                "upload_time_iso_8601": "2022-11-06T09:48:22.513744Z",
                "url": "https://files.pythonhosted.org/packages/b0/05/9962bfbaa02e9946a817ed0a96df51c342ae6912be06085360ffe60b963d/pharindoko.cdk_internal_gateway-0.1.6-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "2102b1fa5f6b318e72938b4eb69df4bf",
                    "sha256": "84217d4847195129df2a48586e6a8ec54d3e64dd359296c15b1c6d2beefc9ea4"
                },
                "downloads": -1,
                "filename": "pharindoko.cdk-internal-gateway-0.1.6.tar.gz",
                "has_sig": false,
                "md5_digest": "2102b1fa5f6b318e72938b4eb69df4bf",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": "~=3.7",
                "size": 167970,
                "upload_time": "2022-11-06T09:48:23",
                "upload_time_iso_8601": "2022-11-06T09:48:23.967256Z",
                "url": "https://files.pythonhosted.org/packages/a6/10/69f51913f756627f2b3ccf61455393cbb221bd169aacd77e92b7e079a40a/pharindoko.cdk-internal-gateway-0.1.6.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.1.7": {
        "info": {
            "author": "Florian Fu\u00df",
            "author_email": "",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 4 - Beta",
                "Intended Audience :: Developers",
                "License :: OSI Approved",
                "Operating System :: OS Independent",
                "Programming Language :: JavaScript",
                "Programming Language :: Python :: 3 :: Only",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.7",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9",
                "Typing :: Typed"
            ],
            "description": "[![npm version](https://badge.fury.io/js/cdk-internal-gateway.svg)](https://badge.fury.io/js/cdk-internal-gateway)\n[![PyPI version](https://badge.fury.io/py/pharindoko.cdk-internal-gateway.svg)](https://badge.fury.io/py/pharindoko.cdk-internal-gateway)\n[![Release](https://github.com/pharindoko/cdk-internal-gateway/actions/workflows/release.yml/badge.svg)](https://github.com/pharindoko/cdk-internal-gateway/actions/workflows/release.yml)\n[![License](https://img.shields.io/badge/license-Apache--2.0-blue)](https://github.com/pharindoko/cdk-internal-gateway/blob/main/LICENSE)\n\n# CDK Internal Gateway\n\nUse this CDK construct to create **internal serverless applications**.\n\nUseful for larger companies to create internal  serverless applications that are not exposed to the internet and only accessible from the internal network.\n\n## Installation\n\nUsing Typescript for aws cdk\n\n```bash\nnpm i cdk-internal-gateway\n```\n\nUsing Python for aws cdk\n\n```bash\npip install pharindoko.cdk-internal-gateway\n```\n\n## Architecture\n\n![cdk-internal-gateway-architecture](cdk-internal-gateway.drawio.png)\n\n### Technical Details\n\n* creates an internal application loadbalancer\n\n  * forwards traffic to VPC endpoint for execute-api\n  * redirect http to https\n* provides a securely configured apigateway resource out of the box\n\n  * attach your aws components to the internal apigateway resource\n  * sets api gateway to PRIVATE mode\n  * sets resource policies to only allow traffic from vpc endpoint\n* generates and attaches custom domains to the API Gateway\n* generates and attaches certificates to the the API Gateway and the loadbalancer\n* modularized approach with separate constructs\n\n  * add multiple internal api gateways to the same internal service to save costs and keep flexibility\n\n## Requirements\n\n* CDK V2 (2.46.0)\n* A VPC\n* A VPC Endpoint for execute-api\n* A Hosted Zone\n* Internally accessible subnets (for the load balancer)\n\n## Usage\n\n> Let`s assume we create a simple internal api for our company and start with a single lambda function...\n\n1. Create a file called `/lib/my-new-stack.ts`\n\n   ```python\n   import { aws_apigateway as apigateway, aws_ec2 as ec2, aws_lambda as lambda, aws_route53 as route53, Stack, StackProps } from 'aws-cdk-lib';\n   import { HttpMethod } from 'aws-cdk-lib/aws-events';\n   import { InternalApiGateway, InternalApiGatewayProps, InternalService } from 'cdk-internal-gateway';\n   import { Construct } from 'constructs';\n   import * as path from 'path';\n\n   // Create a new stack that inherits from the InternalApiGateway Construct\n   export class ServerlessStack extends InternalApiGateway {\n       constructor(scope: Construct, id: string, props: InternalApiGatewayProps) {\n           super(scope, id, props);\n\n           // The internal api gateway is available as member variable\n           // Attach your lambda function to the this.apiGateway\n           const defaultLambdaJavascript = this.apiGateway.root.resourceForPath(\"hey-js\");\n           const defaultHandlerJavascript = new lambda.Function(\n               this,\n               `backendLambdaJavascript`,\n               {\n                   functionName: `js-lambda`,\n                   runtime: lambda.Runtime.NODEJS_14_X,\n                   handler: \"index.handler\",\n                   code: lambda.Code.fromAsset(path.join(__dirname, \"../src\")),\n               }\n           );\n\n           defaultLambdaJavascript.addMethod(\n               HttpMethod.GET,\n               new apigateway.LambdaIntegration(defaultHandlerJavascript)\n           );\n       }\n   }\n\n   // Create a new stack that contains the whole service with all nested stacks\n   export class ServiceStack extends Stack {\n       constructor(scope: Construct, id: string, props: StackProps) {\n           super(scope, id, props);\n\n           // get all parameters to create the internal service stack\n           const vpc = ec2.Vpc.fromLookup(this, 'vpcLookup', { vpcId: 'vpc-1234567890' });\n           const subnetSelection = {\n               subnets: ['subnet-0b1e1c6c7d8e9f0a2', 'subnet-0b1e1c6c7d8e9f0a3'].map((ip, index) =>\n                   ec2.Subnet.fromSubnetId(this, `Subnet${index}`, ip),\n               ),\n           };\n           const hostedZone = route53.HostedZone.fromLookup(this, 'hostedzone', {\n               domainName: 'test.aws1234.com',\n               privateZone: true,\n               vpcId: vpc.vpcId,\n           });\n           const vpcEndpoint =\n               ec2.InterfaceVpcEndpoint.fromInterfaceVpcEndpointAttributes(\n                   this,\n                   'vpcEndpoint',\n                   {\n                       port: 443,\n                       vpcEndpointId: 'vpce-1234567890',\n                   },\n               );\n\n           // create the internal service stack\n           const serviceStack = new InternalService(this, 'InternalServiceStack', {\n               hostedZone: hostedZone,\n               subnetSelection: subnetSelection,\n               vpcEndpointIPAddresses: ['192.168.2.1', '192.168.2.2'],\n               vpc: vpc,\n               subjectAlternativeNames: ['internal.example.com'],\n               subDomain: \"internal-service\"\n           })\n\n           // create your stack that inherits from the InternalApiGateway\n           new ServerlessStack(this, 'MyProjectStack', {\n               domains: serviceStack.domains,\n               stage: \"dev\",\n               vpcEndpoint: vpcEndpoint,\n           })\n\n           // create another stack that inherits from the InternalApiGateway\n           ...\n           ...\n       }\n   }\n   ```\n2. Reference the newly created `ServiceStack` in the default `/bin/{project}.ts` file e.g. like this\n\n   ```python\n   new ServiceStack(app, 'MyProjectStack', {\n   env:\n   {\n       account: process.env.CDK_DEPLOY_ACCOUNT || process.env.CDK_DEFAULT_ACCOUNT,\n       region: process.env.CDK_DEPLOY_REGION || process.env.CDK_DEFAULT_REGION\n   }\n   ```\n\n## Costs\n\nYou have to expect basic infra costs for 2 components in this setup:\n\n| Count |  Type |  Estimated Costs |\n|---|---|---|\n|1 x| application load balancer  | 20 $  |\n|2 x| network interfaces for the vpc endpoint  | 16 $  |\n\nA shared vpc can lower the costs as vpc endpoint and their network interfaces can be used together...\n\n\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/pharindoko/cdk-internal-gateway.git",
            "keywords": "",
            "license": "Apache-2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "pharindoko.cdk-internal-gateway",
            "package_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/",
            "platform": null,
            "project_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/",
            "project_urls": {
                "Homepage": "https://github.com/pharindoko/cdk-internal-gateway.git",
                "Source": "https://github.com/pharindoko/cdk-internal-gateway.git"
            },
            "release_url": "https://pypi.org/project/pharindoko.cdk-internal-gateway/0.1.7/",
            "requires_dist": [
                "aws-cdk-lib (<3.0.0,>=2.46.0)",
                "constructs (<11.0.0,>=10.0.5)",
                "jsii (<2.0.0,>=1.70.0)",
                "publication (>=0.0.3)",
                "typeguard (~=2.13.3)"
            ],
            "requires_python": "~=3.7",
            "summary": "CDK construct to create to create internal serverless applications.",
            "version": "0.1.7",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15701148,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "64269ec986c32f0c6f702a6d9701adba",
                    "sha256": "b0d5e0c2268f5374c5c6e1ea8d55da3791805e26b6028064974381ce087019b3"
                },
                "downloads": -1,
                "filename": "pharindoko.cdk_internal_gateway-0.1.7-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "64269ec986c32f0c6f702a6d9701adba",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": "~=3.7",
                "size": 166750,
                "upload_time": "2022-11-08T16:54:04",
                "upload_time_iso_8601": "2022-11-08T16:54:04.987433Z",
                "url": "https://files.pythonhosted.org/packages/fe/e2/a81b882740800cc0a124e38f79b2a1e3971cd8b32461e75d1007cd44bb1c/pharindoko.cdk_internal_gateway-0.1.7-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "8bcbbde03b5e7e01aa263abf8e541e45",
                    "sha256": "fb3030554458575b63767d4ab25c36985bc1ae62add1174a136aee9a9a44510a"
                },
                "downloads": -1,
                "filename": "pharindoko.cdk-internal-gateway-0.1.7.tar.gz",
                "has_sig": false,
                "md5_digest": "8bcbbde03b5e7e01aa263abf8e541e45",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": "~=3.7",
                "size": 168593,
                "upload_time": "2022-11-08T16:54:06",
                "upload_time_iso_8601": "2022-11-08T16:54:06.917612Z",
                "url": "https://files.pythonhosted.org/packages/07/96/0bfc6783779d5f874f9e1f25895b8cf87fa64bd467ffe390fa0719857318/pharindoko.cdk-internal-gateway-0.1.7.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}