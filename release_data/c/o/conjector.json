{
    "1.3.1": {
        "info": {
            "author": "Yaroslav Kikvadze",
            "author_email": "yaroslav.k@simporter.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9"
            ],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/yar-kik/conjector",
            "keywords": "",
            "license": "MIT",
            "maintainer": "",
            "maintainer_email": "",
            "name": "conjector",
            "package_url": "https://pypi.org/project/conjector/",
            "platform": null,
            "project_url": "https://pypi.org/project/conjector/",
            "project_urls": {
                "Homepage": "https://github.com/yar-kik/conjector"
            },
            "release_url": "https://pypi.org/project/conjector/1.3.1/",
            "requires_dist": [
                "PyYAML (>=6.0)"
            ],
            "requires_python": ">=3.8",
            "summary": "Config injector for Python",
            "version": "1.3.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16221842,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "a6dcba6f37bdeb0c1813f6322d530942",
                    "sha256": "ad905104f70a53de8db00c2727045a43f88d293c0f6c8413d7c59149ef44ac1c"
                },
                "downloads": -1,
                "filename": "conjector-1.3.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "a6dcba6f37bdeb0c1813f6322d530942",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8",
                "size": 10434,
                "upload_time": "2022-12-26T20:26:50",
                "upload_time_iso_8601": "2022-12-26T20:26:50.666420Z",
                "url": "https://files.pythonhosted.org/packages/61/97/9d329536a17b2128f6fc7b362175e91c79cd31d3fb3f57ed76a377d7b0fb/conjector-1.3.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "b892e1b4385435bc37530777518e2351",
                    "sha256": "04624797626212c9c658f06e6b1fed44c435f0616fbae0939a39e50a504bdf31"
                },
                "downloads": -1,
                "filename": "conjector-1.3.1.tar.gz",
                "has_sig": false,
                "md5_digest": "b892e1b4385435bc37530777518e2351",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8",
                "size": 13761,
                "upload_time": "2022-12-26T20:26:55",
                "upload_time_iso_8601": "2022-12-26T20:26:55.665943Z",
                "url": "https://files.pythonhosted.org/packages/58/a5/b57f99d1021166f66b518db94e5c1551f573bf828a85199bb469427a2c2d/conjector-1.3.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "1.3.2": {
        "info": {
            "author": "Yaroslav Kikvadze",
            "author_email": "yaroslav.k@simporter.com",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License",
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.8",
                "Programming Language :: Python :: 3.9"
            ],
            "description": "# Python Config Injector\r\n[![PyPI - Python Version](https://img.shields.io/pypi/pyversions/conjector)](https://pypi.org/project/conjector/)\r\n[![PyPI - Package Version](https://img.shields.io/pypi/v/conjector)](https://pypi.org/project/conjector/)\r\n[![PyPI - License](https://img.shields.io/pypi/l/conjector)](https://pypi.org/project/conjector/)\r\n[![Build Status](https://app.travis-ci.com/yar-kik/conjector.svg?branch=master)](https://app.travis-ci.com/yar-kik/conjector)\r\n[![Coverage Status](https://coveralls.io/repos/github/yar-kik/conjector/badge.svg?branch=master)](https://coveralls.io/github/yar-kik/conjector?branch=master)\r\n[![Code style: black](https://img.shields.io/badge/code%20style-black-000000.svg)](https://github.com/psf/black)\r\n[![Checked with mypy](http://www.mypy-lang.org/static/mypy_badge.svg)](http://mypy-lang.org/)\r\n[![Imports: isort](https://img.shields.io/badge/%20imports-isort-%231674b1?style=flat&labelColor=ef8336)](https://pycqa.github.io/isort/)\r\n[![security: bandit](https://img.shields.io/badge/security-bandit-yellow.svg)](https://github.com/PyCQA/bandit)\r\n\r\n\r\n## What is this\r\nIt is a simple library to inject non-sensitive configurations into class variables.\r\nBasically, it's like `BaseSettings` in `pydantic` library but for constants in `json` and `yaml` formats.\r\n`conjector` can work with different Python types (like `tuple`, `datetime`, `dataclass` and so on) and recursively cast config values to them. \r\n\r\n## When to use\r\n* If you deal with constants in your code, like error messages, default values for something, numeric coefficients, and so on.\r\n* If you hate global variables, and you like non-python files to store static information.\r\n* If you want to have an easy way to manage different constants depending on environments (like `test`, `dev`, `prod`).\r\n* If you like type hints and clean code.\r\n\r\n## How to install\r\nTo install this library just enter:\r\n```shell\r\npip install conjector\r\n```\r\n\r\n## How to use\r\nFor injecting values you need only the decorator `properties` under a target class.\r\nBy default, the library will search a config file `application.yml` in the same directory \r\nwhere your file with the used decorator is located, like below:\r\n\r\n```\r\nproject_root\r\n|---services\r\n|   |   email_message_service.py\r\n|   |   application.yml\r\n|.....\r\n```\r\n\r\nExample:\r\n\r\n`services/application.yml`:\r\n\r\n```yaml \r\ndefault_text_style:\r\n  size: 14\r\n  weight: bold\r\n  font: \"Times New Roman\"\r\n  color:\r\n    - 128\r\n    - 128\r\n    - 128\r\nlanguage_greetings:\r\n  - language: english\r\n    text: hello\r\n  - language: german\r\n    text: hallo\r\n  - language: french\r\n    text: bonjour\r\nwellcome_message: \"{greeting}! Thank you for registration, {username}!\"\r\nmailing_frequency:\r\n  days: 5\r\n  hours: 12\r\n```\r\n`services/email_message_service.py`:\r\n```python\r\nfrom typing import TypedDict\r\nfrom dataclasses import dataclass\r\nfrom datetime import timedelta\r\nfrom app_properties import properties\r\n\r\n@dataclass\r\nclass TextStyle:\r\n    size: int\r\n    weight: str\r\n    font: str\r\n    color: tuple[int, int, int] | str\r\n\r\nclass GreetingDict(TypedDict):\r\n    language: str\r\n    text: str\r\n\r\n@properties\r\nclass EmailMessageService:\r\n    default_text_style: TextStyle\r\n    language_greetings: list[GreetingDict]\r\n    wellcome_message: str\r\n    mailing_frequency: timedelta | None\r\n    \r\n    # And using these class variables in some methods...\r\n```\r\n\r\nAnd that's how will look an equivalent of the code above but with \"hard-coded\" constants, without config files and `@properties` decorator:\r\n```python\r\nclass EmailMessageService:\r\n    default_text_style = TextStyle(\r\n        size=14, weight=\"bold\", font=\"Times New Roman\", color=(128, 128, 128)\r\n    )\r\n    language_greetings = [\r\n      GreetingDict(language=\"english\", text=\"hello\"),\r\n      GreetingDict(language=\"german\", text=\"hallo\"),\r\n      GreetingDict(language=\"french\", text=\"bonjour\"),\r\n    ]\r\n    wellcome_message = \"{greeting}! Thank you for registration, {username}!\"\r\n    mailing_frequency = timedelta(days=5, hours=12)\r\n    \r\n    # And using these class variables in some methods...\r\n```\r\n\r\nAll config values will be inserted and cast according to the type annotations once during the application or script start.\r\nAdditionally, the decorator takes such params:\r\n* `filename` - the name of a file with config. By default, it is `application.yml`. Use a relative path with `../` to read the file from a parent directory;\r\n* `type_cast` - used to know whether you want to cast config values to the field type. \r\nBy default, it's `True`, which means values in a config file will be cast according to the type hints. All types specified in the section `supported types` will be available for type casting. Also, nested types will be recursively cast.\r\nIf `False`, type hinting is ignored, and available types are limited by a file format;\r\n* `override_default` - used to know whether you want to override the default values of class variables. By default, it is `False`;\r\n* `lazy_init` - used to know whether you want to set config values immediately on the application start-up or on demand (\"lazily\") after calling the method `init_props()`. By default, it is `False`;\r\n* `root` - root key in the config. It's the way to create \"namespaces\" when you work with multiple classes but use a single config file. It could be a nested value with separation by dots, for example:\r\n```yaml\r\n# example.yml\r\nservices:\r\n  email_service:\r\n    key: some value\r\n  auth_service:\r\n    key: another value\r\n\r\nclients:\r\n  translation_client:\r\n    key: value\r\n\r\n# and so on...\r\n```\r\n```python\r\nfrom app_properties import properties\r\n\r\n@properties(filename=\"example.yml\", root=\"services.email_service\")\r\nclass EmailService:\r\n    key: str  # will store \"some value\"\r\n\r\n\r\n@properties(filename=\"example.yml\", root=\"services.auth_service\")\r\nclass AuthService:\r\n    key: str  # will store \"another value\"\r\n```\r\n## Different environments\r\nUsing this library it's easy to manage different environments and corresponding config files.\r\nIt could be done like so:\r\n\r\n```python\r\nimport os\r\nfrom app_properties import properties\r\n\r\n\r\n@properties(filename=os.getenv(\"CONFIG_FILENAME\", \"application.yml\"))\r\nclass SomeEnvDependingService:\r\n    env_depend_var: str\r\n```\r\nIn this case, you set `CONFIG_FILENAME=application-dev.yml` in env variables, and `conjector` will use that file.\r\n\r\n## Lazy initialization\r\nIf you want to create some dataclass instance with filled required data during init, \r\nand then populated with config values, you can use the parameter `lazy_init` for this purpose.\r\nAll file constants will be injected after calling the method `init_props`:\r\n```python\r\n# All definitions like in previous examples\r\n\r\n@properties(lazy_init=True)\r\n@dataclass\r\nclass EmailMessageServiceConfig:\r\n    default_text_style: TextStyle\r\n    language_greetings: list[GreetingDict]\r\n    mailing_frequency: timedelta | None = None\r\n    wellcome_message: str = \"some_default_message\"\r\n\r\nemail_config = EmailMessageServiceConfig(\r\n    default_text_style=TextStyle(\r\n        size=16, weight=\"normal\", font=\"Arial\", color=\"black\"\r\n    ),\r\n    language_greetings=[GreetingDict(language=\"english\", text=\"hello\")]\r\n)\r\n# it works like a normal dataclass instance\r\nassert email_config.default_text_style == TextStyle(\r\n    size=16, weight=\"normal\", font=\"Arial\", color=\"black\"\r\n)\r\nassert email_config.mailing_frequency is None\r\nassert email_config.wellcome_message == \"some_default_message\"\r\n\r\n# after calling `init_props`, config values will be injected. \r\n# It also overrides all values that we set during initialize before.\r\nemail_config.init_props()\r\nassert email_config.default_text_style == TextStyle(\r\n    size=14, weight=\"bold\", font=\"Times New Roman\", color=(128, 128, 128)\r\n)\r\nassert email_config.mailing_frequency == timedelta(days=5, hours=12)\r\nassert email_config.wellcome_message == (\r\n    \"{greeting}! Thank you for registration, {username}!\"\r\n)\r\n```\r\n\r\nBecause there are 3 sources of data (default values, values passed during initialization, and config file values), \r\nit could be hard to understand how we can resolve this conflict.\r\nBellow is the table to clarify the behavior of the `init_props` method.\r\n\r\n| init     | default | config | will be used  |\r\n|----------|---------|--------|---------------|\r\n| -        | +       | -      | default       |\r\n| -        | +       | +      | config        |\r\n| +        | ~       | -      | init          |\r\n| +        | ~       | +      | init \\ config |\r\n\r\n_`+`- provided; `-`- missing; `~`- not affect._\r\n\r\nHow you can see, when both `init` and `config` values provided, they are equally important,\r\nbut, by default, `config` have higher priority and overrides `init`. \r\nIf you, for some reason, don't want to override already initialized values, only defaults,\r\nit's also possible with `init_props(override_init=False)`\r\n\r\n## Supported types\r\nThe table below shows how config values (`json` syntax example) are cast to Python types:\r\n\r\n| Python type                                  | Config file type                      | Config example                                                                                                                                                 |\r\n|----------------------------------------------|---------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------|\r\n| `int`                                        | `int`<br/>`str`                       | `10`<br/>`\"10\"`                                                                                                                                                |\r\n| `float`                                      | `float`<br/>`int`<br/>`str`           | `10.5`<br/>`10`<br/>`\"10.5\"`                                                                                                                                   |\r\n| `str`                                        | `str`                                 | `\"string value\"`                                                                                                                                               |\r\n| `bool`                                       | `bool`<br/>`int`<br/>`str`            | `true` / `false`<br/>`1` / `0`<br/>`\"True\"` / `\"False\"`, `\"true\"` / `\"false\"`                                                                                  |\r\n| `None`                                       | `null`                                | `null`                                                                                                                                                         |\r\n| `dict`                                       | `dict`                                | `{\"key\": \"value\"}`                                                                                                                                             |\r\n| `list`<br/>`tuple`<br/>`set`<br/>`frozenset` | `list`                                | `[\"val1\", \"val2\"]`                                                                                                                                             |\r\n| `TypedDict`                                  | `dict`                                | `{\"str_var\": \"value\"}`                                                                                                                                         |\r\n| `NamedTuple`                                 | `list`<br/>`dict`                     | `[\"value\", 10]`<br/>`{\"str_val\": \"value\", \"int_val\": 10}`                                                                                                      |\r\n| `dataclass`                                  | `dict`                                | `{\"str_val\": \"str\", \"int_val\": 10}`                                                                                                                            |\r\n| `datetime.datetime`                          | `str`<br/>`int`<br/>`list`<br/>`dict` | `\"2022-12-11T10:20:23\"`<br/>`1670754600`<br/>`[2022, 12, 11, 10, 20, 23]`<br/>`{\"year\": 2022, \"month\": 12, \"day\": 11, \"hour\": 10, \"minute\": 20, \"second\": 23}` |\r\n| `datetime.date`                              | `str`<br/>`list`<br/>`dict`           | `\"2022-12-11\"`<br/>`[2022, 12, 11]`<br/>`{\"year\": 2022, \"month\": 12, \"day\": 11}`                                                                               |\r\n| `datetime.time`                              | `str`<br/>`list`<br/>`dict`           | `\"12:30:02\"`<br/>`[12, 30, 2]`<br/>`{\"hour\": 12, \"minute\": 30, \"second\": 2}`                                                                                   |\r\n| `datetime.timedelta`                         | `dict`                                | `{\"days\": 1, \"hours\": 2, \"minutes\": 10}`                                                                                                                       |\r\n| `enum.Enum`                                  | `str`<br/>`int`                       | `\"VALUE\"`<br/>`10`                                                                                                                                             |\r\n| `re.Pattern`                                 | `str`                                 | `\"\\w+\"`                                                                                                                                                        |\r\n\r\n## About contributing\r\nYou will make `conjector` better if you open issues or create pull requests with improvements.\r\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/yar-kik/conjector",
            "keywords": "",
            "license": "MIT",
            "maintainer": "",
            "maintainer_email": "",
            "name": "conjector",
            "package_url": "https://pypi.org/project/conjector/",
            "platform": null,
            "project_url": "https://pypi.org/project/conjector/",
            "project_urls": {
                "Homepage": "https://github.com/yar-kik/conjector"
            },
            "release_url": "https://pypi.org/project/conjector/1.3.2/",
            "requires_dist": [
                "PyYAML (>=6.0)"
            ],
            "requires_python": ">=3.8",
            "summary": "Config injector for Python",
            "version": "1.3.2",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16221842,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "2f103e0d8b5c54d6f3d554cc89581061",
                    "sha256": "6600818d3700414e85119f009db6fe7aa84efc40320db07c2f06f235d8c902cf"
                },
                "downloads": -1,
                "filename": "conjector-1.3.2-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "2f103e0d8b5c54d6f3d554cc89581061",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8",
                "size": 10505,
                "upload_time": "2022-12-27T07:18:40",
                "upload_time_iso_8601": "2022-12-27T07:18:40.030469Z",
                "url": "https://files.pythonhosted.org/packages/7b/88/a6d817da365f75c687fc6e1e7b84e84c5e0582cff37a1c4084d427791d04/conjector-1.3.2-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "dc1f942fecfbb2507fdef8f729b0b6d2",
                    "sha256": "2366139b5dccc94840dcf60acb79a6fdab731619bcb742c538b4914f982f53b1"
                },
                "downloads": -1,
                "filename": "conjector-1.3.2.tar.gz",
                "has_sig": false,
                "md5_digest": "dc1f942fecfbb2507fdef8f729b0b6d2",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8",
                "size": 13840,
                "upload_time": "2022-12-27T07:18:45",
                "upload_time_iso_8601": "2022-12-27T07:18:45.336884Z",
                "url": "https://files.pythonhosted.org/packages/f7/23/39d1f479f7f6d5bcc0b0629e254cdad5abb14e459ec43cab38f0dc3624fa/conjector-1.3.2.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}