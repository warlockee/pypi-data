{
    "0.1.0": {
        "info": {
            "author": null,
            "author_email": null,
            "bugtrack_url": null,
            "classifiers": [],
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": null,
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": null,
            "keywords": null,
            "license": null,
            "maintainer": null,
            "maintainer_email": null,
            "name": "salesforce-functions",
            "package_url": "https://pypi.org/project/salesforce-functions/",
            "platform": null,
            "project_url": "https://pypi.org/project/salesforce-functions/",
            "project_urls": {
                "Changelog": "https://github.com/heroku/sf-functions-python/blob/main/CHANGELOG.md",
                "Source": "https://github.com/heroku/sf-functions-python"
            },
            "release_url": "https://pypi.org/project/salesforce-functions/0.1.0/",
            "requires_dist": [
                "aiohttp<4,>=3.8.3",
                "httptools<0.6,>=0.5.0",
                "orjson<4,>=3.8.2",
                "python-dateutil<3,>=2.8.2; python_version < '3.11'",
                "starlette<0.24,>=0.23.0",
                "structlog<23,>=22.2.0",
                "uvicorn<0.21,>=0.20.0",
                "uvloop<0.18,>=0.17.0; sys_platform != 'win32' and sys_platform != 'cygwin'",
                "black==22.12.0; extra == 'development'",
                "flake8==6.0.0; extra == 'development'",
                "httpx==0.23.1; extra == 'development'",
                "isort[colors]==5.11.1; extra == 'development'",
                "mypy==0.991; extra == 'development'",
                "pylint==2.15.8; extra == 'development'",
                "pytest-asyncio==0.20.3; extra == 'development'",
                "pytest-cov==4.0.0; extra == 'development'",
                "pytest==7.2.0; extra == 'development'"
            ],
            "requires_python": ">=3.10",
            "summary": "Python support for Salesforce Functions",
            "version": "0.1.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16187673,
        "urls": [
            {
                "comment_text": null,
                "digests": {
                    "md5": "f365e42681d1c0fed36824b95338fcd9",
                    "sha256": "e377efd362ef9770c53c95b69afdb65d9a89eded75c71aca091403b471571cb0"
                },
                "downloads": -1,
                "filename": "salesforce_functions-0.1.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "f365e42681d1c0fed36824b95338fcd9",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.10",
                "size": 20267,
                "upload_time": "2022-12-14T10:25:14",
                "upload_time_iso_8601": "2022-12-14T10:25:14.242365Z",
                "url": "https://files.pythonhosted.org/packages/ae/29/15622db5bb59ee94dc90027268dc7540db8602586fd1b555aa9228296cbc/salesforce_functions-0.1.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": null,
                "digests": {
                    "md5": "5732469d26442d712058e915c236d451",
                    "sha256": "173f85eadcecc7b77627a93a38fa9bd7dc101dd378ed81f5139c513a68a5d189"
                },
                "downloads": -1,
                "filename": "salesforce_functions-0.1.0.tar.gz",
                "has_sig": false,
                "md5_digest": "5732469d26442d712058e915c236d451",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.10",
                "size": 13952,
                "upload_time": "2022-12-14T10:25:16",
                "upload_time_iso_8601": "2022-12-14T10:25:16.833559Z",
                "url": "https://files.pythonhosted.org/packages/a5/ad/aa81cd3e4a77c3a37aa71bf5bed74acad3d09cc5be74bae1603f1e4a185b/salesforce_functions-0.1.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    },
    "0.2.0": {
        "info": {
            "author": null,
            "author_email": null,
            "bugtrack_url": null,
            "classifiers": [
                "Programming Language :: Python :: 3.10",
                "Programming Language :: Python :: 3.11",
                "Programming Language :: Python :: Implementation :: CPython"
            ],
            "description": "# sf-functions-python\n\n[![PyPI](https://img.shields.io/pypi/v/salesforce-functions.svg?label=PyPI)](https://pypi.org/project/salesforce-functions/)\n[![CI](https://github.com/heroku/sf-functions-python/actions/workflows/ci.yml/badge.svg)](https://github.com/heroku/sf-functions-python/actions/workflows/ci.yml)\n\nPython support for [Salesforce Functions](https://developer.salesforce.com/docs/platform/functions/overview).\n\n> Note: This feature is in beta and has been released early so we can collect feedback. It may contain significant problems, undergo major changes, or be discontinued. The use of this feature is governed by the Salesforce.com Program Agreement.\n\n---\n\n# Getting Started with Python for Functions\n\n## Prerequisites\n\n> Any install commands that follow assume an Apple macOS system with Homebrew available.  If you\u2019re on another OS you\u2019ll have to click through the links to get alternative install instructions.\n\n### [Install Python 3](https://www.python.org/downloads/)\n\n```sh\nbrew install python3\n```\n\nThe installed Python version should be at least `3.10` or higher.\n\nYou can check this with `python3 --version`\n\n> On some machines it\u2019s necessary to run Python and Pip commands using python3 or pip3 which point to the Homebrew-managed Python interpreter versus running python or pip which tends to point at the system installed Python interpreter.  \n\n### [Install Git](https://git-scm.com/downloads)\n\n```sh\nbrew install git\n```\n\nThe installed Git version should be at least `2.36.0` or higher\n\nYou can check this with `git --version`\n\n### [Install / Update the Salesforce CLI](https://developer.salesforce.com/docs/atlas.en-us.sfdx_setup.meta/sfdx_setup/sfdx_setup_install_cli_rc.htm)\n\nIf you haven\u2019t already installed the Salesforce CLI, follow \n[these steps](https://developer.salesforce.com/docs/atlas.en-us.sfdx_setup.meta/sfdx_setup/sfdx_setup_install_cli.htm). \n\nIf you already have the Salesforce CLI installed, make sure it is updated to the latest release, which contains\nPython functions support:\n\n```sh\nsfdx update\n```\n\nThis will update both the `sfdx` and `sf` commands.  The installed version of `sf` should be `1.59.0` or higher.\n\nYou can check this with `sf --version`\n\n### [Create a SFDX Project](https://developer.salesforce.com/docs/platform/functions/guide/create-dx-project.html)\n\nFunctions must be located within a SFDX project, so let\u2019s create one.  \n\n```sh\nsf generate project --name PythonFunctionsAlpha\n```\n\nSome of the following commands need to be run from within the SFDX project directory so change into that directory now with\n\n```sh\ncd PythonFunctionsAlpha\n```\n\nYou should also edit the `config/project-scratch-def.json` file to include the **`Functions`** feature.  After modification, your \nfile should look similar to the following:\n\n```json\n{\n  \"orgName\": \"SomeOrgName\",\n  \"edition\": \"Developer\",\n  \"features\": [\"EnableSetPasswordInApi\", \"Functions\"],\n  \"settings\": {\n    \"lightningExperienceSettings\": {\n      \"enableS1DesktopEnabled\": true\n    },\n    \"mobileSettings\": {\n      \"enableS1EncryptedStoragePref2\": false\n    }\n  }\n}\n```\n\nThe above is needed for connecting and deploying Functions in scratch orgs which is \n[the recommended workflow](https://developer.salesforce.com/docs/platform/functions/guide/connect-dev-org.html) when working \nwith Functions.\n\nAnd, to deploy any Salesforce Function, your SFDX project needs to be a git repo.  This is because the deployment process \nuses git tracked changes to figure out what to deploy.  Run the following commands to setup git:\n\n```sh\ngit init\n```\n\n> It is not a requirement to push your code to GitHub or any other code hosting site.  Committing locally will work fine for deploying.  \n\n### Connect Your Org\n\nYou\u2019ll need to configure your Salesforce org to develop and invoke Salesforce Functions. Develop your functions in scratch \norgs with Dev Hub or in sandbox orgs.  Follow the steps on \n[this page](https://developer.salesforce.com/docs/platform/functions/guide/configure_your_org.html) to ensure everything \nis setup correctly first.\n\nOnce your Org is configured you can login and set it as the default Dev Hub with the following command:\n\n```sh\nsf login org --alias PythonOrg --set-default-dev-hub --set-default\n```\n\nThis will make **PythonOrg** the default Dev Hub for subsequent commands.\n\nThen create a scratch org:\n\n```sh\nsfdx force:org:create \\\n  --definitionfile config/project-scratch-def.json \\\n  --setalias PythonScratch \\\n  --setdefaultusername\n```\n\nThis will make it so that when you run a Function, it will connect to and use the **PythonScratch** org.\n\n### Connect Your Compute Environment\n\nLogin to Salesforce Functions with the same credentials you used to connect your Dev Hub org.\n\n```sh\nsf login functions\n```\n\nThen you will be able to create the compute environment and associate it with the **PythonScratch** org we created while\nconnecting your org.\n\n```sh\nsf env create compute \\\n  --connected-org PythonScratch \\\n  --alias PythonCompute\n```\n\nThis will make it so that when you deploy a Function, it will be deployed to the **PythonCompute** environment linked to \nyour scratch org.\n\n### Assign Permissions\n\nThe default Python project you'll generate requires `read` access to the `Account` object in your scratch org.  Create \na file named `force-app/main/default/permissionsets/Functions.permissionset-meta.xml` in your SFDX project and add the following content:\n\n```xml\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<PermissionSet xmlns=\"http://soap.sforce.com/2006/04/metadata\">\n    <description>Permissions for Salesforce Functions to access Salesforce org data</description>\n    <hasActivationRequired>true</hasActivationRequired>\n    <label>Functions</label>\n    <objectPermissions>\n        <allowCreate>false</allowCreate>\n        <allowDelete>false</allowDelete>\n        <allowEdit>false</allowEdit>\n        <allowRead>true</allowRead>\n        <modifyAllRecords>false</modifyAllRecords>\n        <object>Account</object>\n        <viewAllRecords>false</viewAllRecords>\n    </objectPermissions>\n</PermissionSet>\n```\n\nUpload this permission set to your org:\n\n```sh\nsf deploy metadata --ignore-conflicts\n```\n\nThen assign the permissions to the `Functions` profile with\n\n```sh\nsfdx force:user:permset:assign -n Functions\n```\n\n## Create and Run a Python Function Locally\n\n### Generate the Python Function\n\nFrom the SFDX project root, run:\n\n```sh\nsf generate function \\\n  --language python \\\n  --function-name hellopython\n```\n\nThe remaining commands will be executed within the newly generated project folder. Change to that folder by running:\n\n```sh\ncd functions/hellopython\n```\n\nYou should also create a `.gitignore` file in the function directory with the following contents:\n```gitignore\nvenv\n__pycache__\n```\n\nThe following command will do this for you:\n```sh\necho -e \"venv\\n__pycache__\" > .gitignore\n```\n\n### Create the Python [Virtual Environment](https://docs.python.org/3/library/venv.html#creating-virtual-environments) & Install Dependencies\n\nTo install the dependencies required by the Python Function locally, we first need to create a \"Virtual Environment\" (venv) \nwhich we can install packages into without affecting your system Python installation.  This can be done by running:\n```sh\npython3 -m venv venv\n```\n\nNext, the virtual environment needs to be activated.  \n\nOn a **macOS / Linux system** you can activate the virtual environment with\n\n```sh\nsource venv/bin/activate\n```\n\nOn a **Microsoft Windows system** you can activate the virtual environment with\n```sh\n.\\venv\\Scripts\\activate\n```\n\n> For help with setting up a virtual environment, see the [Python documentation](https://packaging.python.org/en/latest/guides/installing-using-pip-and-virtual-environments/#creating-a-virtual-environment).\n\nFinally, the dependencies can be installed into the newly created environment:\n\n```sh\npip3 install -r requirements.txt\n```\n\nThis will ensure your function has all dependencies it requires installed before you run it.  If you forgot to do this \nbefore starting the Function locally you\u2019ll receive an error reminding you to perform this step.\n\n### Run the Python Function Locally\n\n```sh\nsf run function start\n```\n\nThis will start the function running locally on http://localhost:8080.  Messages logged by the running function will appear here.\n\n### Invoke the Running Python Function\n\nAfter starting the function:\n\n* open a new command line terminal \n* navigate to the `hellopython` directory \n* invoke the function by sending it a payload\n\n```sh\nsf run function --function-url http://localhost:8080 --payload '{}'\n```\n\n## Deploy the Python Function\n\nThe remaining commands need to be executed from the **root of your SFDX project**, so change into that directory now:\n\n```sh\ncd ../../\n```\n\n### Commit your changes to Git\n\nAll code changes made to a function will need to be staged and committed before you can deploy:\n\n```sh\ngit add .\ngit commit -m \"Trying out python functions\"\n```\n\nOnce everything is committed to git, run:\n\n```sh\nsf deploy functions --connected-org PythonScratch\n```\n\nThis deployment process may take several minutes.\n\nIf you receive a `Request failed with status code 404` error message, check the earlier `sf env create compute` step was performed.\n\n### Invoke the Function from Apex\n\nThe easiest way to invoke the function deployed to our scratch org is with some Apex code.  Generate an Apex class with:\n\n```sh\nsfdx force:apex:class:create \\\n  --classname ApexTrigger \\\n  --outputdir force-app/main/default/classes\n```\n\nOpen `force-app/main/default/classes/ApexTrigger.cls` and replace it with the following code:\n\n```java\npublic with sharing class ApexTrigger {\n    public static void runFunction() {\n        System.debug('Running hellopython');\n        functions.Function fn = functions.Function.get('PythonFunctionsAlpha.hellopython');\n        functions.FunctionInvocation invocation = fn.invoke('{}');\n        System.debug('Response: ' + invocation.getResponse());\n    }\n}\n```\n\nThis code will:\n\n* Lookup the reference to our function using the `functions.Function.get` method \n* Invoke the function with an empty json payload\n* Print the response\n\nUpload this Apex class to your scratch org with\n\n```sh\nsfdx force:source:push --targetusername PythonScratch\n```\n\nOpen a developer console:\n\n```sh\nsfdx force:org:open -p /_ui/common/apex/debug/ApexCSIPage\n```\n\nThen execute the function.\n\nOn a **macOS / Linux system** you can execute the function with:\n\n```sh\necho \"ApexTrigger.runFunction();\" | sfdx force:apex:execute -f /dev/stdin\n```\n\nOn a **Microsoft Windows system** you can execute the function with:\n\n```sh\necho \"FunctionApex.test();\" | sfdx force:apex:execute\n```\n\nThe developer console will show a log entry in the bottom panel after the function executes, which you can double-click to open.\nToggle the Debug Only filter to reduce the log messages to just the ones from the `ApexTrigger` function.\n\nYou should see a view like the one below:\n\n![Developer Console](./assets/developer-console.png)\n\n---\n\n> NOTE: You may encounter the following error\n\n```\nSystem.CalloutException: Error during Salesforce Functions Sync Invocation. Ensure that \nfunction 'PythonFunctionsAlpha.hellopython' is deployed and its status is \navailable ('OK', 'up'). If issue persists, contact Salesforce Support.\n```\n\nIf you see this then there may not be a problem, the function just might not be available yet in the compute \nenvironment. Wait several minutes and then try the command above again.\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": null,
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": null,
            "keywords": "functions,salesforce",
            "license": null,
            "maintainer": null,
            "maintainer_email": null,
            "name": "salesforce-functions",
            "package_url": "https://pypi.org/project/salesforce-functions/",
            "platform": null,
            "project_url": "https://pypi.org/project/salesforce-functions/",
            "project_urls": {
                "Changelog": "https://github.com/heroku/sf-functions-python/blob/main/CHANGELOG.md",
                "Source": "https://github.com/heroku/sf-functions-python"
            },
            "release_url": "https://pypi.org/project/salesforce-functions/0.2.0/",
            "requires_dist": [
                "aiohttp<4,>=3.8.3",
                "httptools<0.6,>=0.5.0",
                "orjson<4,>=3.8.2",
                "python-dateutil<3,>=2.8.2; python_version < '3.11'",
                "starlette<0.24,>=0.23.0",
                "structlog<23,>=22.2.0",
                "tomli<3,>=2.0.1; python_version < '3.11'",
                "uvicorn<0.21,>=0.20.0",
                "uvloop<0.18,>=0.17.0; sys_platform != 'win32' and sys_platform != 'cygwin'",
                "black==22.12.0; extra == 'development'",
                "coverage-conditional-plugin==0.8.0; extra == 'development'",
                "flake8==6.0.0; extra == 'development'",
                "httpx==0.23.1; extra == 'development'",
                "isort[colors]==5.11.4; extra == 'development'",
                "mypy==0.991; extra == 'development'",
                "pylint==2.15.9; extra == 'development'",
                "pytest-asyncio==0.20.3; extra == 'development'",
                "pytest-cov==4.0.0; extra == 'development'",
                "pytest==7.2.0; extra == 'development'"
            ],
            "requires_python": ">=3.10",
            "summary": "Python support for Salesforce Functions",
            "version": "0.2.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16187673,
        "urls": [
            {
                "comment_text": null,
                "digests": {
                    "md5": "953458042ea9eb9e1af49c5dcad8bad9",
                    "sha256": "21cd318b51c0447b27a587cfbd0148701ae8da775a413af9ac4581836f421fbe"
                },
                "downloads": -1,
                "filename": "salesforce_functions-0.2.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "953458042ea9eb9e1af49c5dcad8bad9",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.10",
                "size": 25583,
                "upload_time": "2022-12-22T16:22:52",
                "upload_time_iso_8601": "2022-12-22T16:22:52.297436Z",
                "url": "https://files.pythonhosted.org/packages/7f/69/0ba5962b5529dffc20601e9afd7fb3d362cb9c8591b4a63bf9829e0e22f7/salesforce_functions-0.2.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": null,
                "digests": {
                    "md5": "7335f7c711888e0baed8c12c045d6d84",
                    "sha256": "e344148701d162824b2b136b33cffce997882d5b87867eb221ba56e35928d4e2"
                },
                "downloads": -1,
                "filename": "salesforce_functions-0.2.0.tar.gz",
                "has_sig": false,
                "md5_digest": "7335f7c711888e0baed8c12c045d6d84",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.10",
                "size": 19181,
                "upload_time": "2022-12-22T16:22:49",
                "upload_time_iso_8601": "2022-12-22T16:22:49.902614Z",
                "url": "https://files.pythonhosted.org/packages/42/df/9d57e1e9ab9383cb93966af39486fe3d0947719a1aab969dd3c86699881a/salesforce_functions-0.2.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}