{
    "1.1.71": {
        "info": {
            "author": "Michael Costa, Florent Chevalier",
            "author_email": "michael.costa@mcos.nc, florent.chevalier@gouv.nc",
            "bugtrack_url": null,
            "classifiers": [
                "Development Status :: 5 - Production/Stable",
                "Environment :: Console",
                "Intended Audience :: Developers",
                "Intended Audience :: System Administrators",
                "License :: OSI Approved :: MIT License",
                "Operating System :: OS Independent",
                "Programming Language :: Python :: 3",
                "Topic :: Software Development :: Libraries :: Application Frameworks"
            ],
            "description": "![Build Status](https://drone.mcos.nc/api/badges/scrippy/scrippy-db/status.svg) ![License](https://img.shields.io/static/v1?label=license&color=orange&message=MIT) ![Language](https://img.shields.io/static/v1?label=language&color=informational&message=Python)\n\n![Scrippy, mon ami le scrangourou](./scrippy-db.png \"Scrippy, mon ami le scrangourou\")\n\n# `scrippy_db`\n\nClient de bases de donn\u00e9es g\u00e9n\u00e9rique pour le cadriciel [`Scrippy`](https://codeberg.org/scrippy).\n\n## Pr\u00e9requis\n\n### Modules Python\n\n#### Liste des modules n\u00e9cessaires\n\nLes modules list\u00e9s ci-dessous seront automatiquement install\u00e9s.\n\n- psycopg2-binary\n- cx-Oracle\n\n## Installation\n\n### Manuelle\n\n```bash\ngit clone https://codeberg.org/scrippy/scrippy-db.git\ncd scrippy-db.git\nsudo python3 -m pip install -r requirements.txt\nmake install\n```\n\n### Avec `pip`\n\n```bash\nsudo pip3 install scrippy-db\n```\n\n### Utilisation\n\nLe module `scrippy_db.db` propose l'objet `Db` dont l'objectif est d'offrir les fonctionnalit\u00e9s li\u00e9es \u00e0 l'utilisation d'une base de donn\u00e9es.\n\nLa connexion \u00e0 une base de donn\u00e9es peut se faire soit en fournissant directement les param\u00e8tres de connexion (`username`, `host`, `database`, `port`, `password`) au constructeur soit en fournissant le _nom du service_ sur lequel se connecter.\n\nLe param\u00e8tre `db_type` permet de sp\u00e9cifier le type de base de donn\u00e9es (`postgres` ou `oracle`). La valeur par d\u00e9faut de ce param\u00e8tre est `postgres`.\n\nL'ex\u00e9cution d'une requ\u00eate est effectu\u00e9e avec la m\u00e9thode `Db.execute()` qui accepte les param\u00e8tres suivants:\n- `request`: La requ\u00eate en elle m\u00eame (obligatoire)\n- `params`: Les param\u00e8tres de la requ\u00eate dans l'ordre exact de leur apparition au sein de la requ\u00eate (optionnel)\n- `verbose`: Bool\u00e9en indiquant si la requ\u00eate et son r\u00e9sultat doivent appara\u00eetre dans le log. Le niveau de log doit positionn\u00e9 a minima \u00e0 `info`.\n\nUne requ\u00eate peut comporter un ou plusieurs param\u00e8tres variables n\u00e9cessitant l'adaptation de la requ\u00eate \u00e0 ces param\u00e8tres.\n\nDans un soucis de s\u00e9curit\u00e9 certaines pratiques sont **strictement** \u00e0 proscrire et d'autres doivent imp\u00e9rativement \u00eatre appliqu\u00e9es.\n\nLes param\u00e8tres d'une requ\u00eate doivent \u00eatre pass\u00e9s dans un *tuple* \u00e0 la m\u00e9thode `Db.execute()` qui se chargera de v\u00e9rifier la validit\u00e9 des vos param\u00e8tres.\n\n N'essayez **jamais** de g\u00e9rer vous m\u00eame l'interpolation des param\u00e8tres \u00e0 l'int\u00e9rieur de la requ\u00eate\n\n#### Exemple\n\nR\u00e9cup\u00e9ration de donn\u00e9es et mise \u00e0 jour conditionnelle de la base.\n\n```python\nfrom scrippy_db import db\n\ndb_user = \"harry.fink\"\ndb_password = \"dead_parrot\"\ndb_host = \"flying.circus\"\ndb_port = \"5432\"\ndb_base = \"monty_python\"\napp_name = \"spanish_inquisition\"\napp_version \"0.42.0\"\napp_status = \"Deployed\"\n\ndate = datetime.datetime.now().strftime('%Y%m%d %H:%M:%S')\n\nwith db.Db(username=db_user, host=db_host, port=db_port, database=db_base,  password=db_password) as database:\n  # V\u00e9rification de l'\u00e9tat de l'application\n  req = \"select app_status, app_version, date from apps where app_name=%s;\"\n  params = (app_name,)\n  current_status = database.execute(req, params, verbose=True)\n  if current_status != None:\n    # L'application est d\u00e9j\u00e0 enregistr\u00e9e, on affiche son statut actuel\n    # On met \u00e0 jour son statut\n    req = \"insert into apps (app_name, app_version, app_status, date) values (%s, %s, %s, %s);\"\n    params = (app_name, app_version, app_status, date)\n    result = database.execute(req, params, verbose=True)\n  else:\n    # L'application n'a jamais \u00e9t\u00e9 enregistr\u00e9e, on enregistre l'application et son statut.\n    req = \"insert into apps (app_name, app_version, app_status, date) values (%s, %s, %s, %s);\"\n    params = (app_name, app_version, app_status, date)\n    result = database.execute(req, params, verbose=True)\n```\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://codeberg.org/scrippy/scrippy-db",
            "keywords": "",
            "license": "",
            "maintainer": "",
            "maintainer_email": "",
            "name": "scrippy-db",
            "package_url": "https://pypi.org/project/scrippy-db/",
            "platform": null,
            "project_url": "https://pypi.org/project/scrippy-db/",
            "project_urls": {
                "Homepage": "https://codeberg.org/scrippy/scrippy-db"
            },
            "release_url": "https://pypi.org/project/scrippy-db/1.1.71/",
            "requires_dist": [
                "psycopg2-binary (>=2.8.3)",
                "cx-Oracle (>=7.2.2)",
                "twine ; extra == 'dev'",
                "wheel (>=0.37.0) ; extra == 'dev'",
                "flake8 (>=4.0.1) ; extra == 'dev'",
                "flake8-breakpoint (>=1.1.0) ; extra == 'dev'",
                "flake8-builtins (>=1.5.3) ; extra == 'dev'",
                "flake8-print (>=4.0.0) ; extra == 'dev'",
                "flake8-return (>=1.1.3) ; extra == 'dev'",
                "pep8-naming (>=0.8.2) ; extra == 'dev'",
                "pytest (>=6.2.2) ; extra == 'dev'",
                "pytest-cov (>=3.0.0) ; extra == 'dev'",
                "bump2version (>=1.0.1) ; extra == 'dev'",
                "setuptools (>=60.9.2) ; extra == 'dev'",
                "pypirc-chappers (>=1.0.8) ; extra == 'dev'",
                "pylint (>=2.12.2) ; extra == 'dev'"
            ],
            "requires_python": ">=3.8",
            "summary": "\"Client de bases de donn\u00e9es pour le cadriciel Scrippy\"",
            "version": "1.1.71",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16264593,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "8b67ce7a234958e44bb4d6b24652a28d",
                    "sha256": "4a342e0f25d0044e30f323b5cd01c5f86792b096210f4995c7848561a3ce477e"
                },
                "downloads": -1,
                "filename": "scrippy_db-1.1.71-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "8b67ce7a234958e44bb4d6b24652a28d",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.8",
                "size": 6156,
                "upload_time": "2022-12-31T04:39:31",
                "upload_time_iso_8601": "2022-12-31T04:39:31.608487Z",
                "url": "https://files.pythonhosted.org/packages/94/8c/01cc10989012bb48ee5ced4192ddb076e1243e68230f9f471e942c250c67/scrippy_db-1.1.71-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "c5f359d116c2aeb38756fec1559c29d0",
                    "sha256": "01d919a15ee5ccde4f871a198ef0eb4a8129834f18f7d1e450e04150774ac257"
                },
                "downloads": -1,
                "filename": "scrippy-db-1.1.71.tar.gz",
                "has_sig": false,
                "md5_digest": "c5f359d116c2aeb38756fec1559c29d0",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.8",
                "size": 6019,
                "upload_time": "2022-12-31T04:39:33",
                "upload_time_iso_8601": "2022-12-31T04:39:33.167954Z",
                "url": "https://files.pythonhosted.org/packages/45/56/e52335ca717ab9b44578186725dd31644e5c0dc074c90d8d4abf6216dabf/scrippy-db-1.1.71.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}