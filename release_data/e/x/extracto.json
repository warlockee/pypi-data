{
    "0.1": {
        "info": {
            "author": "Colin Dellow",
            "author_email": "",
            "bugtrack_url": null,
            "classifiers": [],
            "description": "# extracto\n\n[![PyPI](https://img.shields.io/pypi/v/extracto.svg)](https://pypi.org/project/extracto/)\n[![Changelog](https://img.shields.io/github/v/release/cldellow/extracto?include_prereleases&label=changelog)](https://github.com/cldellow/extracto/releases)\n[![License](https://img.shields.io/badge/license-Apache%202.0-blue.svg)](https://github.com/cldellow/extracto/blob/main/LICENSE)\n\nExtract Python dicts from HTML files, fast.\n\nBuilt on the very fast [selectolax](https://github.com/rushter/selectolax) library,\nand applies a few tricks to make your life happier.\n\n## Installation\n\nInstall this library using `pip`:\n\n    pip install extracto\n\n## Usage\n\n```python\nfrom extracto import prepare, extract_rows\nfrom selectolax.parser import HTMLParser\n\nhtml = '''\n<h1>Famous Allens</h1>\n<div data-occupation=\"actor\">\n  <div><b>Name</b> Alfie</div>\n  <div><b>Year</b> 1986</div>\n</div>\n<div data-occupation=\"singer\">\n  <div><b>Name</b> Lily</div>\n  <div><b>Year</b> 1985</div>\n</div>\n<div data-occupation=\"cocaine-trafficker\">\n  <div><b>Name</b> Tim</div>\n  <div><b>Year</b> Unknown</div>\n</div>\n'''\n\ntree = HTMLParser(html)\n\n# Tweak the parsed DOM to be more amenable to scraping via CSS.\nprepare(tree)\n\nresults = extract_rows(\n    tree,\n    {\n        # Try to emit a row for every element matched by this selector\n        'selector': 'h1 ~ div',\n        'columns': [\n            {\n                # Columns are usually evaluated relative to the row selector,\n                # but you can \"break out\" and have an absolute value by\n                # prefixing the selector with \"html\"\n                'selector': 'html h1'\n                'conversions': [\n                    # Strip \"Famous\" by capturing only the text that follows,\n                    # and assigning it to the return value ('rv') group\n                    re.compile('Famous (?P<rv>.+)')\n                ]\n            },\n            {\n                'selector': '.q-name + span',\n            },\n            {\n                'selector': '.q-year + span',\n                # Convert the year to an int\n                'conversions': ['int'],\n                # If we fail to extract something for this column, that's OK--just emit None\n                'optional': True,\n            },\n            {\n                'conversions': [\n                  # Extract the value of the \"data-occupation\" attribute\n                  '@data-occupation',\n                  # Actors are boring\n                  re.compile('singer|cocaine-trafficker'),\n                ],\n            }\n        ]\n    }\n)\n```\n\nWill result in:\n\n```\n[\n  [ 'Allens', 'Lily', 1985, 'singer' ],\n  [ 'Allens', 'Tim', None, 'cocaine-trafficker' ],\n]\n```\n\nNote that Alfie was excluded by the regular expression filter on\noccupation, which permitted only `singer` and `cocaine-trafficker` rows\nthrough.\n\n## Development\n\nTo contribute to this library, first checkout the code. Then create a new virtual environment:\n\n    cd extracto\n    python -m venv venv\n    source venv/bin/activate\n\nNow install the dependencies and test dependencies:\n\n    pip install -e '.[test]'\n\nTo run the tests:\n\n    pytest\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": "",
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": "https://github.com/cldellow/extracto",
            "keywords": "",
            "license": "Apache License, Version 2.0",
            "maintainer": "",
            "maintainer_email": "",
            "name": "extracto",
            "package_url": "https://pypi.org/project/extracto/",
            "platform": null,
            "project_url": "https://pypi.org/project/extracto/",
            "project_urls": {
                "CI": "https://github.com/cldellow/extracto/actions",
                "Changelog": "https://github.com/cldellow/extracto/releases",
                "Homepage": "https://github.com/cldellow/extracto",
                "Issues": "https://github.com/cldellow/extracto/issues"
            },
            "release_url": "https://pypi.org/project/extracto/0.1/",
            "requires_dist": [
                "selectolax",
                "pytest ; extra == 'test'",
                "pytest-watch ; extra == 'test'",
                "wheel ; extra == 'test'",
                "pytest-skip-slow ; extra == 'test'",
                "pytest-profiling ; extra == 'test'"
            ],
            "requires_python": ">=3.7",
            "summary": "Extract Python dicts from HTML files, fast.",
            "version": "0.1",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 16012753,
        "urls": [
            {
                "comment_text": "",
                "digests": {
                    "md5": "2ff47414380cd8d3bdea99a0eba24cb4",
                    "sha256": "5ac44b4aa2fdb39008b4832a5c373f896439acc1e104a8f9fd164b5ed5096e68"
                },
                "downloads": -1,
                "filename": "extracto-0.1-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "2ff47414380cd8d3bdea99a0eba24cb4",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.7",
                "size": 16724,
                "upload_time": "2022-12-06T21:25:43",
                "upload_time_iso_8601": "2022-12-06T21:25:43.677287Z",
                "url": "https://files.pythonhosted.org/packages/2f/54/ae82329ed09935d150428f2a81b8ca53c77f29d59a0a4f43142fa6f467df/extracto-0.1-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": "",
                "digests": {
                    "md5": "e8f19fab8239ae2ccd09595658c72723",
                    "sha256": "0cbb64007fa3d0aa446aa568e3270e2fd233151a7bc5e8e04176053e765fb94a"
                },
                "downloads": -1,
                "filename": "extracto-0.1.tar.gz",
                "has_sig": false,
                "md5_digest": "e8f19fab8239ae2ccd09595658c72723",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.7",
                "size": 16224,
                "upload_time": "2022-12-06T21:25:45",
                "upload_time_iso_8601": "2022-12-06T21:25:45.002132Z",
                "url": "https://files.pythonhosted.org/packages/2f/2b/7774d5721058458b3a5acf89e371a5d583f28fd186140420fd72bd094f3d/extracto-0.1.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}