{
    "1.0.0": {
        "info": {
            "author": null,
            "author_email": "Shako Rzayev <rzayev.sehriyar@gmail.com>",
            "bugtrack_url": null,
            "classifiers": [
                "License :: OSI Approved :: MIT License"
            ],
            "description": "# What is Read-Once object?\n\nThis concept is defined and explained in [Secure by Design](https://www.manning.com/books/secure-by-design) book.\n\nIt is also exposed in this link [LiveBook](https://livebook.manning.com/concept/security/read-once-object).\n\nThe overall characteristics of Read-Once objects, grabbed from [Book Review: Secure by\u00a0Design](https://adriancitu.com/tag/read-once-object-pattern/)\n\n```\nRead-once objects\n\nA read-once object is an object designed to be read once (or a limited number of times). This object usually represents a value or concept in your domain that\u2019s considered to be sensitive (for example, passport numbers, credit card numbers, or passwords). The main purpose of the read-once object is to facilitate detection of unintentional use of the data it encapsulates.\n\nHere\u2019s a list of the key aspects of a read-once object:\n\n    Its main purpose is to facilitate detection of unintentional use.\n    It represents a sensitive value or concept.\n    It\u2019s often a domain primitive.\n    Its value can be read once, and once only.\n    It prevents serialization of sensitive data.\n    It prevents sub-classing and extension.\n```\n\n# About the Usage\n\nImagine that you need to pass a password it to some kind of service, which is going to Login your user.\nThe Login service will only require this password only once, so why not to restrict it to be read, used only Once?\n\n\n```py\nfrom readonce import ReadOnce\n\n\nclass Password(ReadOnce):\n    def __init__(self, password: str) -> None:\n        super().__init__()\n        self.add_secret(password)\n\n```\n\nHere the password string is added as a secret. \nFrom our definition it can be read only once and only using `get_secret()`, no direct access to the secret.\n\n* You can not expose the object properties as well:\n\n```py\n>>> obj = Password(password=\"awesome_password\")\n>>> dir(obj)\n[]\n>>> obj.__dict__\n{}\n```\n\n* Trying to read the password twice:\n\n```py\n>>> obj.get_secret()\n'awesome_password'\n>>> obj.get_secret()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/shako/REPOS/py-read-once/.venv/lib/python3.10/site-packages/readonce.py\", line 47, in get_secret\n    raise UnsupportedOperationException(\"Sensitive data was already consumed\")\nreadonce.UnsupportedOperationException: ('Not allowed on sensitive value', 'Sensitive data was already consumed')\n```\n\n* If someone tries to add its own secret to already instantiated object and then get back already defined secret data(original secret),\nit will get only new secret.\n\n```py\n>>> obj = Password(password=\"awesome_password\")\n>>> obj.add_secret(\"new_fake_date\")\n>>> obj.get_secret()\n'new_fake_date'\n>>> obj.get_secret()\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/shako/REPOS/py-read-once/.venv/lib/python3.10/site-packages/readonce.py\", line 47, in get_secret\n    raise UnsupportedOperationException(\"Sensitive data was already consumed\")\nreadonce.UnsupportedOperationException: ('Not allowed on sensitive value', 'Sensitive data was already consumed')\n```\n\n* You cannot create a subclass from sensitive class, it is a way of expose parent class data, but no success:\n\n```py\n>>> class FakePassword(Password):\n...     ...\n... \nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/shako/REPOS/py-read-once/.venv/lib/python3.10/site-packages/readonce.py\", line 21, in __new__\n    raise TypeError(\"Subclassing final classes is restricted\")\nTypeError: Subclassing final classes is restricted\n```\n\n* If somebody tries to access secrets directly:\n\n```py\n>>> obj.secrets\n[]\n>>> obj._ReadOnce__secrets\n[]\n```\n\n* You can not pickle it:\n\n```py\n>>> import pickle\n>>> pickle.dumps(obj)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/home/shako/REPOS/py-read-once/.venv/lib/python3.10/site-packages/readonce.py\", line 87, in __getstate__\n    raise UnsupportedOperationException()\nreadonce.UnsupportedOperationException: Not allowed on sensitive value\n```\n\n* You can not JSON serialize it:\n\nWith default encoder:\n\n```py\n>>> import json\n\n>>> json.dumps(obj)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib/python3.10/json/__init__.py\", line 231, in dumps\n    return _default_encoder.encode(obj)\n  File \"/usr/lib/python3.10/json/encoder.py\", line 199, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"/usr/lib/python3.10/json/encoder.py\", line 257, in iterencode\n    return _iterencode(o, 0)\n  File \"/usr/lib/python3.10/json/encoder.py\", line 179, in default\n    raise TypeError(f'Object of type {o.__class__.__name__} '\nTypeError: Object of type Password is not JSON serializable\n```\n\nWith custom encoder:\n\n```py\nclass CustomPasswordEncoder(json.JSONEncoder):\n    def default(self, obj):\n        try:\n            return {\"password\": obj.get_secret()}\n        except AttributeError:\n            return super().default(obj)\n```\n\n```py\n>>> json.dumps(obj, cls=CustomPasswordEncoder)\nTraceback (most recent call last):\n  File \"<stdin>\", line 1, in <module>\n  File \"/usr/lib/python3.10/json/__init__.py\", line 238, in dumps\n    **kw).encode(obj)\n  File \"/usr/lib/python3.10/json/encoder.py\", line 199, in encode\n    chunks = self.iterencode(o, _one_shot=True)\n  File \"/usr/lib/python3.10/json/encoder.py\", line 257, in iterencode\n    return _iterencode(o, 0)\n  File \"<stdin>\", line 4, in default\n  File \"/home/shako/REPOS/py-read-once/.venv/lib/python3.10/site-packages/readonce.py\", line 48, in get_secret\n    raise UnsupportedOperationException(\"Sensitive data can not be serialized\")\nreadonce.UnsupportedOperationException: ('Not allowed on sensitive value', 'Sensitive data can not be serialized')\n```\n\n* At some points the class itself can be silently dumped to logs, but not here:\n\n```py\n>>> obj = Password(password=\"awesome_password\")\n>>> print(obj)\nReadOnce[secrets=*****]\n>>> obj\nReadOnce[secrets=*****]\n```\n\n\n# How to install?\n\n### Create and activate the virtualenv:\n\n* `python3.10 -m venv .venv`\n\n* `source .venv/bin/activate`\n\nWe use flit for the package management:\n\n### Install flit:\n\n* `pip install flit==3.7.1`\n\n### Installing project for development\n\n`make install-dev` or `flit install --env --deps=develop --symlink` \n\n### Installing for general showcase\n\n`make install` or `flit install --env --deps=develop` \n\n### Run all tests in verbose\n\n`make test` or `pytest -svv` \n\n",
            "description_content_type": "text/markdown",
            "docs_url": null,
            "download_url": null,
            "downloads": {
                "last_day": -1,
                "last_month": -1,
                "last_week": -1
            },
            "home_page": null,
            "keywords": null,
            "license": null,
            "maintainer": null,
            "maintainer_email": null,
            "name": "readonce",
            "package_url": "https://pypi.org/project/readonce/",
            "platform": null,
            "project_url": "https://pypi.org/project/readonce/",
            "project_urls": null,
            "release_url": "https://pypi.org/project/readonce/1.0.0/",
            "requires_dist": [
                "black >=22.3.0 ; extra == \"dev\"",
                "pylint >=2.12.2 ; extra == \"dev\"",
                "isort >=5.9.3 ; extra == \"dev\"",
                "autoflake >=1.4 ; extra == \"dev\"",
                "flake8 >=4.0.1 ; extra == \"dev\"",
                "pre-commit >=2.17.0 ; extra == \"dev\"",
                "pytype >=2022.1.31 ; extra == \"dev\"",
                "pytest >=7.1.3 ; extra == \"test\"",
                "pytest-cov >= 3.0.0 ; extra == \"test\""
            ],
            "requires_python": ">=3.10",
            "summary": "Read-Once Object implementation in Python - Inspired by Secure by Design book.",
            "version": "1.0.0",
            "yanked": false,
            "yanked_reason": null
        },
        "last_serial": 15981630,
        "urls": [
            {
                "comment_text": null,
                "digests": {
                    "md5": "4bf198771c0629e999134844ece9a0a3",
                    "sha256": "4ee2ac26ab2f95f1debd785fcc1f8874f1831904aa7ba6a18a84024e0dda607d"
                },
                "downloads": -1,
                "filename": "readonce-1.0.0-py3-none-any.whl",
                "has_sig": false,
                "md5_digest": "4bf198771c0629e999134844ece9a0a3",
                "packagetype": "bdist_wheel",
                "python_version": "py3",
                "requires_python": ">=3.10",
                "size": 4928,
                "upload_time": "2022-12-03T22:45:31",
                "upload_time_iso_8601": "2022-12-03T22:45:31.773226Z",
                "url": "https://files.pythonhosted.org/packages/86/51/a87d04710564f655ad6f9c4db4c0f83e0be9bc5d5c2fb50ec2e769f62984/readonce-1.0.0-py3-none-any.whl",
                "yanked": false,
                "yanked_reason": null
            },
            {
                "comment_text": null,
                "digests": {
                    "md5": "463a3ed21269c526983a91ec8dfc8cd2",
                    "sha256": "e6c50b706388580ddbc5739f9153ca55c64085cc6223a01a78646762144c3f50"
                },
                "downloads": -1,
                "filename": "readonce-1.0.0.tar.gz",
                "has_sig": false,
                "md5_digest": "463a3ed21269c526983a91ec8dfc8cd2",
                "packagetype": "sdist",
                "python_version": "source",
                "requires_python": ">=3.10",
                "size": 7184,
                "upload_time": "2022-12-03T22:45:33",
                "upload_time_iso_8601": "2022-12-03T22:45:33.178740Z",
                "url": "https://files.pythonhosted.org/packages/f5/0a/9ffd0d8046f9377a1c12d0286e196589816e07ed14e3fd7864b31b2eaae2/readonce-1.0.0.tar.gz",
                "yanked": false,
                "yanked_reason": null
            }
        ],
        "vulnerabilities": []
    }
}